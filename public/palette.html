<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Palette Lab – Free Color Palette Maker</title>
  <meta name="description" content="Generate beautiful color palettes, extract colors from images, copy hex codes, and export a swatch sheet. Free and runs fully in your browser." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { boxShadow: { soft: '0 10px 30px rgba(0,0,0,0.12)'} } }
    }
  </script>
  <style>
    input[type=file] { position: absolute; left: -9999px; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-2xl bg-gradient-to-tr from-fuchsia-500 to-violet-500"></div>
        <div>
          <h1 class="font-bold tracking-tight">Palette Lab</h1>
          <p class="text-xs text-slate-500 -mt-0.5">Free color palette generator</p>
        </div>
      </div>
      <nav class="hidden sm:flex items-center gap-3 text-sm">
        <a href="/index.html" class="hover:text-indigo-600">Meme Studio</a>
        <a href="#how" class="hover:text-indigo-600">How it works</a>
        <a href="#faq" class="hover:text-indigo-600">FAQ</a>
              <a href="/palette.html" class="hover:text-indigo-600">Palette Maker</a>
      </nav>
    </div>
  </header>  <main class="max-w-6xl mx-auto px-4 py-6 grid lg:grid-cols-12 gap-6">
    <!-- Controls -->
    <section class="lg:col-span-4">
      <div class="bg-white rounded-2xl shadow-soft p-4 space-y-4">
        <h2 class="font-semibold text-lg">Controls</h2>
        <div class="grid grid-cols-2 gap-2">
          <button id="randBtn" class="rounded-xl bg-indigo-600 text-white px-3 py-2 text-sm">Random palette</button>
          <button id="monoBtn" class="rounded-xl border border-slate-200 px-3 py-2 text-sm">Monochrome</button>
          <button id="triadBtn" class="rounded-xl border border-slate-200 px-3 py-2 text-sm">Triad</button>
          <button id="complBtn" class="rounded-xl border border-slate-200 px-3 py-2 text-sm">Complementary</button>
        </div><label class="block mt-2">
      <span class="text-sm">Pick a base color</span>
      <input id="colorPicker" class="w-full mt-1 h-10 rounded-xl border border-slate-200" type="color" value="#7c3aed" />
    </label>

    <label class="block mt-2">
      <span class="text-sm">Extract from image</span>
      <input id="fileInput" type="file" accept="image/*" />
      <button id="uploadBtn" class="w-full mt-1 inline-flex items-center justify-center rounded-xl border border-slate-200 px-3 py-2 text-sm hover:bg-slate-50">Choose image…</button>
    </label>

    <div class="grid grid-cols-2 gap-2 mt-2">
      <button id="copyAll" class="rounded-xl bg-emerald-600 text-white px-3 py-2 text-sm">Copy hex list</button>
      <button id="exportPNG" class="rounded-xl bg-emerald-600 text-white px-3 py-2 text-sm">Export PNG</button>
    </div>

    <div class="rounded-xl border border-dashed border-slate-300 p-3 text-xs text-slate-500">
      <p class="font-semibold mb-1">Ad spot</p>
      <p>Paste your ad code here (AdSense/Media.net). Tool interaction time is high near this control panel.</p>
      <div class="mt-2 h-28 bg-slate-100 rounded-lg flex items-center justify-center">Your ad here</div>
    </div>
  </div>
</section>

<!-- Output -->
<section class="lg:col-span-8">
  <div class="bg-white rounded-2xl shadow-soft p-4">
    <div class="flex items-center justify-between mb-3">
      <h2 class="font-semibold text-lg">Palette</h2>
      <div class="text-xs text-slate-500">Tip: click a swatch to copy</div>
    </div>
    <div id="swatches" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3"></div>
    <canvas id="preview" class="mt-4 w-full rounded-xl border border-slate-200"></canvas>
  </div>

  <section id="how" class="mt-6 bg-white rounded-2xl shadow-soft p-4">
    <h3 class="font-semibold text-lg mb-2">How it works</h3>
    <ol class="list-decimal pl-5 space-y-1 text-sm">
      <li>Generate or pick a base color.</li>
      <li>Choose a scheme or extract colors from an image.</li>
      <li>Click swatches to copy hex; export a PNG swatch sheet.</li>
    </ol>
  </section>

  <section id="faq" class="mt-6 grid md:grid-cols-2 gap-4">
    <div class="bg-white rounded-2xl shadow-soft p-4">
      <h4 class="font-semibold">Is this free?</h4>
      <p class="text-sm text-slate-600">Yes. Everything runs locally in your browser.</p>
    </div>
    <div class="bg-white rounded-2xl shadow-soft p-4">
      <h4 class="font-semibold">Do you store my images?</h4>
      <p class="text-sm text-slate-600">Nope.</p>
    </div>
  </section>
</section>

  </main>  <footer class="max-w-6xl mx-auto px-4 py-10 text-center text-xs text-slate-500">
    <p>&copy; <span id="year"></span> Palette Lab.</p>
  </footer>  <script>
    const yearEl = document.getElementById('year'); yearEl.textContent = new Date().getFullYear();

    const swatchesEl = document.getElementById('swatches');
    const preview = document.getElementById('preview');
    const ctx = preview.getContext('2d');
    const fileInput = document.getElementById('fileInput');

    const state = { colors: ['#7c3aed', '#a78bfa', '#22d3ee', '#10b981', '#f59e0b'] };

    function setPalette(colors) {
      state.colors = colors.map(c => normalizeHex(c));
      renderSwatches();
      renderPreview();
    }

    function normalizeHex(hex) {
      hex = hex.trim();
      if (hex.startsWith('#')) hex = hex.slice(1);
      if (hex.length === 3) hex = hex.split('').map(x=>x+x).join('');
      return '#' + hex.toLowerCase();
    }

    function renderSwatches() {
      swatchesEl.innerHTML = '';
      state.colors.forEach((hex) => {
        const card = document.createElement('button');
        card.className = 'rounded-xl border border-slate-200 overflow-hidden text-left group';
        card.title = 'Click to copy';
        card.addEventListener('click', () => copyToClipboard(hex));
        const sw = document.createElement('div');
        sw.style.background = hex; sw.className = 'h-20 w-full';
        const meta = document.createElement('div');
        meta.className = 'px-3 py-2 text-sm flex items-center justify-between';
        meta.innerHTML = `<span class="font-semibold">${hex}</span><span class="text-xs text-slate-500 group-hover:text-slate-700">Copy</span>`;
        card.appendChild(sw); card.appendChild(meta);
        swatchesEl.appendChild(card);
      });
    }

    function renderPreview() {
      const width = preview.clientWidth || 800; const height = 140;
      preview.width = width; preview.height = height;
      const n = state.colors.length;
      state.colors.forEach((hex,i)=>{
        ctx.fillStyle = hex; ctx.fillRect(Math.floor(i*width/n), 0, Math.ceil(width/n), height);
      });
      // Titles
      ctx.fillStyle = '#000000'; ctx.globalAlpha = 0.08; ctx.fillRect(0, 0, width, height);
      ctx.globalAlpha = 1;
      ctx.font = 'bold 16px Inter, system-ui'; ctx.fillStyle = '#0f172a';
      ctx.fillText('Palette Lab • ' + state.colors.join('  '), 12, height-12);
    }

    async function copyToClipboard(text) {
      try { await navigator.clipboard.writeText(text); toast('Copied ' + text); } catch (e) { alert(text + ' copied'); }
    }

    function toast(msg) {
      const t = document.createElement('div');
      t.textContent = msg; t.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-sm px-3 py-2 rounded-xl shadow-soft';
      document.body.appendChild(t); setTimeout(()=> t.remove(), 1400);
    }

    // Color helpers
    function hexToHsl(hex){
      hex = normalizeHex(hex).slice(1);
      const r = parseInt(hex.substr(0,2),16)/255, g = parseInt(hex.substr(2,2),16)/255, b = parseInt(hex.substr(4,2),16)/255;
      const max = Math.max(r,g,b), min = Math.min(r,g,b);
      let h,s,l = (max+min)/2;
      if(max===min){ h=0; s=0; } else {
        const d = max-min;
        s = l>0.5 ? d/(2-max-min) : d/(max+min);
        switch(max){
          case r: h=(g-b)/d+(g<b?6:0); break;
          case g: h=(b-r)/d+2; break;
          case b: h=(r-g)/d+4; break;
        }
        h/=6;
      }
      return {h: Math.round(h*360), s: Math.round(s*100), l: Math.round(l*100)};
    }
    function hslToHex(h,s,l){
      h/=360; s/=100; l/=100;
      const hue2rgb=(p,q,t)=>{ if(t<0) t+=1; if(t>1) t-=1; if(t<1/6) return p+(q-p)*6*t; if(t<1/2) return q; if(t<2/3) return p+(q-p)*(2/3-t)*6; return p; };
      let r,g,b;
      if(s===0){ r=g=b=l; } else {
        const q = l<0.5 ? l*(1+s) : l+s-l*s; const p = 2*l-q;
        r = hue2rgb(p,q,h+1/3); g = hue2rgb(p,q,h); b = hue2rgb(p,q,h-1/3);
      }
      const toHex = x => ('0'+Math.round(x*255).toString(16)).slice(-2);
      return '#' + toHex(r) + toHex(g) + toHex(b);
    }

    function genRandomPalette(){
      const baseH = Math.floor(Math.random()*360);
      const hues = [0, 25, -25, 140, -140].map(d=> (baseH + d + 360) % 360);
      return hues.map((h,i)=> hslToHex(h, 70 - i*5, 55 + (i%2?10:0)));
    }
    function genMonochrome(hex){
      const {h,s,l} = hexToHsl(hex); const arr=[];
      for (let i=0;i<5;i++){ arr.push(hslToHex(h, Math.max(15, s - i*8), Math.min(80, 20 + i*15))); }
      return arr;
    }
    function genTriad(hex){
      const {h} = hexToHsl(hex);
      return [h, (h+120)%360, (h+240)%360, (h+60)%360, (h+300)%360].map((hh,i)=> hslToHex(hh, 70, 50 + (i%2?10:0)));
    }
    function genComplementary(hex){
      const {h} = hexToHsl(hex); const hs=[h, (h+180)%360, (h+210)%360, (h+330)%360, (h+30)%360];
      return hs.map((hh,i)=> hslToHex(hh, 70 - i*4, 50 + (i%2?8:0)));
    }

    // Image extraction via simple k-means clustering
    function extractFromImage(img, k=5){
      const canvas = document.createElement('canvas');
      const maxSide = 200; const ratio = Math.min(maxSide/img.width, maxSide/img.height, 1);
      canvas.width = Math.max(1, Math.floor(img.width*ratio)); canvas.height = Math.max(1, Math.floor(img.height*ratio));
      const c = canvas.getContext('2d'); c.drawImage(img,0,0,canvas.width,canvas.height);
      const data = c.getImageData(0,0,canvas.width,canvas.height).data;
      const pixels = [];
      for (let i=0;i<data.length;i+=4){ const a=data[i+3]; if (a<200) continue; pixels.push([data[i],data[i+1],data[i+2]]); }
      // k-means
      if (pixels.length===0) return ['#000000'];
      const centroids = Array.from({length:k}, (_,i)=> pixels[Math.floor(Math.random()*pixels.length)].slice());
      for (let iter=0; iter<8; iter++){
        const sums = Array.from({length:k}, ()=> [0,0,0,0]);
        for (const p of pixels){
          let best=0, bestD=1e9;
          for (let ci=0;ci<k;ci++){ const c0=centroids[ci]; const d=(p[0]-c0[0])**2+(p[1]-c0[1])**2+(p[2]-c0[2])**2; if (d<bestD){bestD=d; best=ci;} }
          const s=sums[best]; s[0]+=p[0]; s[1]+=p[1]; s[2]+=p[2]; s[3]++;
        }
        for (let ci=0;ci<k;ci++){ const s=sums[ci]; if (s[3]>0){ centroids[ci]=[s[0]/s[3]|0, s[1]/s[3]|0, s[2]/s[3]|0]; } }
      }
      // Convert to hex and sort by perceived brightness
      const hexes = centroids.map(rgb=> '#' + rgb.map(v=> ('0'+v.toString(16)).slice(-2)).join(''));
      const luminance = (h)=>{ const r=parseInt(h.slice(1,3),16), g=parseInt(h.slice(3,5),16), b=parseInt(h.slice(5,7),16); return 0.2126*r+0.7152*g+0.0722*b; };
      return hexes.sort((a,b)=> luminance(b)-luminance(a));
    }

    // Wire up controls
    function byId(id){ return document.getElementById(id); }
    byId('randBtn').onclick = ()=> setPalette(genRandomPalette());
    byId('monoBtn').onclick = ()=> setPalette(genMonochrome(byId('colorPicker').value));
    byId('triadBtn').onclick = ()=> setPalette(genTriad(byId('colorPicker').value));
    byId('complBtn').onclick = ()=> setPalette(genComplementary(byId('colorPicker').value));
    byId('colorPicker').addEventListener('input', ()=> setPalette(genMonochrome(byId('colorPicker').value)));

    document.getElementById('uploadBtn').addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=>{
      const file = e.target.files?.[0]; if (!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{ const img = new Image(); img.onload = ()=> setPalette(extractFromImage(img)); img.src = reader.result; };
      reader.readAsDataURL(file);
    });

    byId('copyAll').onclick = ()=> copyToClipboard(state.colors.join(' '));
    byId('exportPNG').onclick = ()=>{
      const w = 1600, h = 900, pad=40, gutter=24, cols=state.colors.length;
      const cvs = document.createElement('canvas'); cvs.width=w; cvs.height=h; const c=cvs.getContext('2d');
      c.fillStyle = '#ffffff'; c.fillRect(0,0,w,h);
      const swW = (w - pad*2 - gutter*(cols-1)) / cols; const swH = h - pad*2 - 100;
      state.colors.forEach((hex,i)=>{
        const x = pad + i*(swW+gutter), y = pad;
        c.fillStyle = hex; c.fillRect(x,y,swW,swH);
        c.fillStyle = '#0f172a'; c.font = '700 24px Inter, system-ui'; c.fillText(hex, x, y+swH+36);
      });
      c.fillStyle = '#475569'; c.font = '16px Inter, system-ui'; c.fillText('Palette Lab • palettelab', pad, h - 24);
      const a = document.createElement('a'); a.download = 'palette.png'; a.href = cvs.toDataURL('image/png'); a.click();
    };

    // init
    setPalette(state.colors);
  </script></body>
</html>
